(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60ba4210"],{3272:function(e,r,t){"use strict";var o=t("b006"),s=t.n(o);s.a},a55b:function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login-container"},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[e.isLogin?t("el-card",{key:"login",staticClass:"login-main"},[t("h2",[e._v("管理系统登录")]),t("el-form",{ref:"loginForm",staticStyle:{padding:"25px"},attrs:{model:e.loginForm,rules:e.loginRules}},[t("el-form-item",{attrs:{prop:"loginAccount"}},[t("el-input",{staticClass:"login-input",attrs:{placeholder:"账号",clearable:""},model:{value:e.loginForm.loginAccount,callback:function(r){e.$set(e.loginForm,"loginAccount",r)},expression:"loginForm.loginAccount"}},[t("i",{staticClass:"el-icon-user",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",{attrs:{prop:"loginPassword"}},[t("el-input",{attrs:{placeholder:"密码","show-password":""},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.onLogin(r)}},model:{value:e.loginForm.loginPassword,callback:function(r){e.$set(e.loginForm,"loginPassword",r)},expression:"loginForm.loginPassword"}},[t("i",{staticClass:"el-icon-lock",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.onLogin},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.onLogin(r)}}},[e._v("登录")])],1),t("el-form-item",[t("el-link",{staticStyle:{"font-size":"15px"},attrs:{underline:!1},on:{click:function(r){r.preventDefault(),e.isLogin=!1}}},[e._v("还没有账号？创建一个！")])],1)],1)],1):t("el-card",{key:"register",staticClass:"login-main"},[t("h2",[e._v("注册")]),t("el-form",{ref:"regForm",staticStyle:{padding:"25px"},attrs:{model:e.regForm,rules:e.regRules}},[t("el-form-item",{attrs:{error:e.regIdError}},[t("el-radio-group",{model:{value:e.regForm.regType,callback:function(r){e.$set(e.regForm,"regType",r)},expression:"regForm.regType"}},[t("el-radio-button",{attrs:{label:"0"}},[e._v("邮箱注册")]),t("el-radio-button",{attrs:{label:"1"}},[e._v("手机号码注册")])],1)],1),t("el-form-item",{attrs:{prop:"regAccount"}},[t("el-input",{staticClass:"login-input",attrs:{placeholder:"账号"},model:{value:e.regForm.regAccount,callback:function(r){e.$set(e.regForm,"regAccount",r)},expression:"regForm.regAccount"}},[t("i",{staticClass:"el-icon-user",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",{attrs:{prop:"regPassword"}},[t("el-input",{attrs:{placeholder:"密码","show-password":""},model:{value:e.regForm.regPassword,callback:function(r){e.$set(e.regForm,"regPassword",r)},expression:"regForm.regPassword"}},[t("i",{staticClass:"el-icon-lock",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",{attrs:{prop:"regFirmPassword"}},[t("el-input",{attrs:{placeholder:"确认密码","show-password":""},model:{value:e.regForm.regFirmPassword,callback:function(r){e.$set(e.regForm,"regFirmPassword",r)},expression:"regForm.regFirmPassword"}},[t("i",{staticClass:"el-icon-lock",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",{attrs:{prop:"regCitizenID"}},[t("el-input",{attrs:{placeholder:"身份证号"},model:{value:e.regForm.regCitizenID,callback:function(r){e.$set(e.regForm,"regCitizenID",r)},expression:"regForm.regCitizenID"}},[t("i",{staticClass:"el-icon-bank-card",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",{attrs:{prop:"regCode"}},[t("el-input",{attrs:{placeholder:"验证码"},model:{value:e.regForm.regCode,callback:function(r){e.$set(e.regForm,"regCode",r)},expression:"regForm.regCode"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-s-promotion",disabled:e.codeDisabled},on:{click:e.onSendCode},slot:"append"},[e._v(e._s(e.codeMessage))])],1)],1),t("el-form-item",[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.onRegister}},[e._v("注册")])],1),t("el-form-item",[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"normal"},on:{click:function(r){e.isLogin=!0}}},[e._v("返回")])],1)],1)],1)],1)],1)},s=[],n=(t("a4d3"),t("4de4"),t("4160"),t("fb6a"),t("e439"),t("dbb4"),t("b64b"),t("d3b7"),t("159b"),t("96cf"),t("2fa7")),i=t("622a"),a=t("2f62");function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(t,!0).forEach((function(r){Object(n["a"])(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(t).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var g={name:"Login",data:function(){return{kingRoot:"JDJhJDEwJHBHUHBBTmwza3ZvSHhXblJTcGg3Ry4=",loginForm:{loginAccount:"",loginPassword:""},regForm:{regAccount:"",regPassword:"",regFirmPassword:"",regCitizenID:"",regType:"",regCode:""},loginRules:{loginAccount:[{required:!0,message:"请输入账号",trigger:"blur"}],loginPassword:[{required:!0,message:"请输入密码",trigger:"blur"}]},regRules:{regAccount:[{required:!0,message:"请输入账号",trigger:"blur"}],regPassword:[{required:!0,message:"请输入密码",trigger:"blur"}],regFirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:this.firmPassword,trigger:"blur"}],regCitizenID:[{required:!0,message:"请输入身份证号码",trigger:"blur"},{validator:this.validID,trigger:"blur"}],regCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},isLogin:!0,count:60,codeMessage:"发送验证码",codeDisabled:!1,regIdError:""}},methods:l({},Object(a["c"])(["setUser"]),{validID:function(e,r,t){var o;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:o=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,o.test(r)?t():t(new Error("身份证号码不正确"));case 2:case"end":return e.stop()}}))},firmPassword:function(e,r,t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:r===this.regForm.regPassword?t():t(new Error("确认密码错误"));case 1:case"end":return e.stop()}}),null,this)},onLogin:function(){var e=this,r=window.atob(this.kingRoot),t=this.bcrypt.hashSync(this.loginForm.loginPassword,window.atob(this.kingRoot)),o=t.slice(r.length);this.$refs.loginForm.validate((function(r){if(!r)return!1;e.axios.post(i["c"].login,e.qs.stringify({userID:e.loginForm.loginAccount,password:o})).then((function(r){if(e.setUser(r.data.objData),localStorage.setItem("account",e.loginForm.loginAccount),e.$route.query.redirect){var t=e.$route.query.redirect;e.$router.push({path:t})}else e.$router.push("/main")})).catch((function(r){if(2008===r.response.data.resultCode){r.response.data.objData;e.$alert("这是一段内容",r.response.data.message,{confirmButtonText:"确定",callback:function(r){e.$message({type:"info",message:"action: ".concat(r)})}})}else e.$message({type:"error",message:r.response.data.message})}))}))},onRegister:function(){var e=this,r=window.atob(this.kingRoot),t=this.bcrypt.hashSync(this.regForm.regPassword,window.atob(this.kingRoot)),o=t.slice(r.length);this.$refs.regForm.validate((function(r){if(!r)return!1;e.axios.post(i["c"].register,e.qs.parse({id:e.regForm.regAccount,password:o,code:e.regForm.regCode,citizenID:e.regForm.regCitizenID,registerType:e.regForm.regType})).then((function(r){console.log(r),e.$refs.regForm.resetFields(),e.regForm={},e.$message({type:"success",message:r.data.message}),e.isLogin=!0})).catch((function(r){e.$message({type:"error",message:r.response.data.message})}))}))},onSendCode:function(){var e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,""!==this.regForm.regAccount){r.next=5;break}this.regIdError="请输入账号",r.next=11;break;case 5:return this.regIdError="",r.next=8,regeneratorRuntime.awrap(this.sendCode());case 8:e=r.sent,console.log(e),200===e.status&&this.countDown();case 11:r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](0),this.regIdError=r.t0.response.data.content;case 16:case"end":return r.stop()}}),null,this,[[0,13]])},sendCode:function(){var e={},r="";switch(this.regForm.regType){case"0":e={email:this.regForm.regAccount},r=i["c"].sendEmailCode;break;case"1":e={phoneNum:this.regForm.regAccount},r=i["c"].sendSmsCode;break;default:return Promise.reject({response:{data:{content:"未选择方式"}}})}return this.axios.post(r,this.qs.stringify(e))},countDown:function(){var e=this;if(0===this.count)return this.count=60,this.codeMessage="发送验证码",void(this.codeDisabled=!1);this.count--,this.codeDisabled=!0,this.codeMessage=this.count+"s后重新发送",setTimeout((function(){e.countDown()}),1e3)}}),created:function(){this.loginForm.loginAccount=localStorage.getItem("account")}},u=g,d=(t("3272"),t("2877")),p=Object(d["a"])(u,o,s,!1,null,"8e6163c8",null);r["default"]=p.exports},b006:function(e,r,t){},fb6a:function(e,r,t){"use strict";var o=t("23e7"),s=t("861d"),n=t("e8b5"),i=t("23cb"),a=t("50c4"),c=t("fc6a"),l=t("8418"),g=t("1dde"),u=t("b622"),d=u("species"),p=[].slice,m=Math.max;o({target:"Array",proto:!0,forced:!g("slice")},{slice:function(e,r){var t,o,g,u=c(this),f=a(u.length),h=i(e,f),b=i(void 0===r?f:r,f);if(n(u)&&(t=u.constructor,"function"!=typeof t||t!==Array&&!n(t.prototype)?s(t)&&(t=t[d],null===t&&(t=void 0)):t=void 0,t===Array||void 0===t))return p.call(u,h,b);for(o=new(void 0===t?Array:t)(m(b-h,0)),g=0;h<b;h++,g++)h in u&&l(o,g,u[h]);return o.length=g,o}})}}]);
//# sourceMappingURL=chunk-60ba4210.fbce6869.js.map