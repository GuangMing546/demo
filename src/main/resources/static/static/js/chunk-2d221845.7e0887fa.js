(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221845"],{cb4d:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!(t.normalListOK&&t.draftListOK),expression:"!(normalListOK && draftListOK)"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"流程名称",width:"180"}}),a("el-table-column",{attrs:{prop:"userId",label:"创建者用户ID"}}),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t._f("statusFilter")(e.row.status)}},[t._v(" "+t._s(t.getStatusName(e.row.status))+" ")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.row.id,e.row.name,e.row.userId,e.row.status)}}},[t._v("查看")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.row.id,e.row.status)}}},[t._v("删除")])]}}])})],1)],1)},r=[],n=(a("a4d3"),a("e01a"),a("d28b"),a("99af"),a("5ded"),a("d3b7"),a("3ca3"),a("ddb0"),a("284c")),o=a("622a"),i={name:"index",data:function(){return{flowList:[],draftList:[],normalListOK:!1,draftListOK:!1}},computed:{tableData:function(){return Array.of.apply(Array,Object(n["a"])(this.flowList).concat(Object(n["a"])(this.draftList)))}},filters:{statusFilter:function(t){var e={normal:"success",draft:"info"};return e[t]}},methods:{getFlowList:function(){var t=this;this.axios.post(o["a"].getProcessListByUser).then((function(e){t.flowList=e.data.objData;var a=!0,s=!1,r=void 0;try{for(var n,o=t.flowList[Symbol.iterator]();!(a=(n=o.next()).done);a=!0){var i=n.value;i.status="normal"}}catch(l){s=!0,r=l}finally{try{a||null==o.return||o.return()}finally{if(s)throw r}}t.normalListOK=!0})).catch((function(e){t.$message({type:"error",message:e.response.data.message})}))},getDraftList:function(){var t=this;this.axios.get(o["a"].getDraftList).then((function(e){if(1===e.data.resultCode){t.draftList=e.data.objData;var a=!0,s=!1,r=void 0;try{for(var n,o=t.draftList[Symbol.iterator]();!(a=(n=o.next()).done);a=!0){var i=n.value;i.status="draft"}}catch(l){s=!0,r=l}finally{try{a||null==o.return||o.return()}finally{if(s)throw r}}t.draftListOK=!0}})).catch((function(e){t.$message({type:"error",message:e.response.data.message})}))},getStatusName:function(t){var e={normal:"正稿",draft:"草稿"};return e[t]},handleEdit:function(t,e,a,s){this.$router.push({name:"GraphEditor",params:{flowId:t,flowName:e,userId:a,status:s}})},handleDelete:function(t,e){var a=this;this.$confirm("此操作将永久删除该流程, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if("normal"===e){var s=Array.of(t);a.axios.post(o["a"].deleteProcess,a.qs.stringify({processIDs:s},{indices:!1})).then((function(t){1===t.data.resultCode&&(a.$message({type:"success",message:"删除成功!"}),a.getFlowList())})).catch((function(t){a.$message({type:"error",message:t.response.data.message})}))}else"draft"===e&&a.axios.delete(o["a"].deleteDraft,{params:{id:t}}).then((function(t){1===t.data.resultCode&&(a.$message({type:"success",message:"删除成功!"}),a.getDraftList())})).catch((function(t){a.$message({type:"error",message:t.response.data.message})}))})).catch((function(){}))}},created:function(){this.getFlowList(),this.getDraftList()}},l=i,u=a("2877"),c=Object(u["a"])(l,s,r,!1,null,"c8071b44",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d221845.7e0887fa.js.map